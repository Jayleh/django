{% extends 'mapapp/layout.html' %}
{% block styles %}
{% load static %}
<!-- Leaflet CSS & JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
  crossorigin="" />
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
  crossorigin=""></script>
<!-- Leaflet timeline plugin -->
<script src="https://cdn.jsdelivr.net/npm/leaflet.timeline@1.2.1/dist/leaflet.timeline.min.js"></script>
<!-- Marker Cluster JS & CSS -->
<script src="https://unpkg.com/leaflet.markercluster@1.0.3/dist/leaflet.markercluster.js"></script>
<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.3/dist/MarkerCluster.css">
<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.3/dist/MarkerCluster.Default.css">
<!-- External CSS -->
<link rel="stylesheet" href="{% static 'mapapp/css/styles.css' %}">
{% endblock styles %}
{% block main %}
<div class="card side-panel" data-js="side-panel">
  <div class="card-content">
    <nav class="nav-search">
      <div class="nav-wrapper">
        <form data-js="form-search">
          <div class="input-field">
            <input id="search" data-js="search" type="search" required>
            <label class="label-icon" for="search"><i class="material-icons">search</i></label>
            <i class="material-icons">close</i>
          </div>
        </form>
      </div>
    </nav>
    <div class="reseller-list-container">
      <ul class="collapsible" data-js="reseller-list">
        {% for reseller in resellers %}
        <li>
          <div class="collapsible-header">
            <span><strong>{{ reseller.first_name }} {{ reseller.last_name }}</strong>
              &nbsp;&nbsp;{{ reseller.city }}, {{ reseller.state }}</span>
          </div>
          <div class="collapsible-body">
            <div class="reseller-info">
              <i class="material-icons">home</i>
              <div class="address">
                <p>{{ reseller.address }}</p>
                <p>{{ reseller.city }}, {{ reseller.state }}</p>
              </div>
            </div>
            <div class="reseller-info">
              <i class="material-icons">email</i>
              <p>{{ reseller.email }}</p>
            </div>
            <div class="reseller-info">
              <i class="material-icons">phone</i>
              <p>{{ reseller.phone }}</p>
            </div>
            <a href="/update-reseller/{{ reseller.id }}" class="btn waves-effect light-effect update-reseller-button"
              data-js="update-reseller-button">Update</a>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="card-action center-align">
    <a href="/add-reseller" class="btn small waves-effect waves-light">Add New Reseller</a>
  </div>
</div>
<div id="map"></div>
<div class="open-sidenav" data-js="open-sidenav">
  <a class="btn-floating btn waves-effect waves-light red tooltipped" data-position="left" data-tooltip="Toggle Side Panel"><i
      class="material-icons">graphic_eq</i></a>
</div>
{% if messages %}
{% for message in messages %}
<div {% if message.tags %} class="toast messages {{ message.tags }}" {% else %} class="toast messages" {% endif %}>
  {{ message }}
  <i class="material-icons flash-close">cancel</i>
</div>
{% endfor %}
{% endif %}
{% endblock main %}
{% block scripts %}
{% load static %}
<!-- D3.js v4 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
<!-- External JS -->
<script src="{% static 'mapapp/js/map.js' %}"></script>
<script src="{% static 'mapapp/js/index.js' %}"></script>
{% endblock scripts %}